<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Active Manipulation Learning: aml_drivers/aml_pisa_hand/qbAPI/src/qbmove_communications.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Active Manipulation Learning
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('qbmove__communications_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">qbmove_communications.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library of functions for SERIAL PORT communication with a QB Move. Function Prototypes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="commands_8h_source.html">commands.h</a>&quot;</code><br />
<code>#include &lt;time.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qbmove_communications.h:</div>
<div class="dyncontent">
<div class="center"><img src="qbmove__communications_8h__incl.png" border="0" usemap="#aml__drivers_2aml__pisa__hand_2qb_a_p_i_2src_2qbmove__communications_8h" alt=""/></div>
<map name="aml__drivers_2aml__pisa__hand_2qb_a_p_i_2src_2qbmove__communications_8h" id="aml__drivers_2aml__pisa__hand_2qb_a_p_i_2src_2qbmove__communications_8h">
<area shape="rect" id="node2" href="commands_8h.html" title="Definitions for QB Move commands, parameters and packages. " alt="" coords="5,105,103,131"/>
</map>
</div>
</div>
<p><a href="qbmove__communications_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcomm__settings.html">comm_settings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab521aa5010fb1afb801a899a55569e03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ab521aa5010fb1afb801a899a55569e03">HANDLE</a>&#160;&#160;&#160;int</td></tr>
<tr class="separator:ab521aa5010fb1afb801a899a55569e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fdc7facea201bfce4ad308105f88d0c"><td class="memItemLeft" align="right" valign="top"><a id="a5fdc7facea201bfce4ad308105f88d0c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INVALID_HANDLE_VALUE</b>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:a5fdc7facea201bfce4ad308105f88d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4a4b9cd04b7bc0361256581b13fadbdc"><td class="memItemLeft" align="right" valign="top"><a id="a4a4b9cd04b7bc0361256581b13fadbdc"></a>
typedef struct <a class="el" href="structcomm__settings.html">comm_settings</a>&#160;</td><td class="memItemRight" valign="bottom"><b>comm_settings</b></td></tr>
<tr class="separator:a4a4b9cd04b7bc0361256581b13fadbdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a70990e1cf4d18b3baeb3c7295dbd6426"><td class="memItemLeft" align="right" valign="top"><a id="a70990e1cf4d18b3baeb3c7295dbd6426"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commBootloader</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a70990e1cf4d18b3baeb3c7295dbd6426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ef5f590c59ab49a224b8e612eb08ac"><td class="memItemLeft" align="right" valign="top"><a id="a92ef5f590c59ab49a224b8e612eb08ac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commCalibrate</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a92ef5f590c59ab49a224b8e612eb08ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fc8ebaa05ea9d3ff895088c30103d5"><td class="memItemLeft" align="right" valign="top"><a id="ac3fc8ebaa05ea9d3ff895088c30103d5"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commHandCalibrate</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int speed, short int repetitions)</td></tr>
<tr class="separator:ac3fc8ebaa05ea9d3ff895088c30103d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Virtual COM (RS485) functions</div></td></tr>
<tr class="memitem:a088f2abb4e7610589910e31f5c72b236"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a088f2abb4e7610589910e31f5c72b236">RS485listPorts</a> (char list_of_ports[10][255])</td></tr>
<tr class="separator:a088f2abb4e7610589910e31f5c72b236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d05126da422a8993b011282362c7882"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, const char *port_s)</td></tr>
<tr class="separator:a4d05126da422a8993b011282362c7882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f87643fab51e02e4eab71bf4ab1a33a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t)</td></tr>
<tr class="separator:a5f87643fab51e02e4eab71bf4ab1a33a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">QB Move Commands</div></td></tr>
<tr class="memitem:a8c7444a05d655538cb7d13ee47290c8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a8c7444a05d655538cb7d13ee47290c8d">RS485read</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char *package)</td></tr>
<tr class="separator:a8c7444a05d655538cb7d13ee47290c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bf8448818684348d30d03d59fc2c1b"><td class="memItemLeft" align="right" valign="top"><a id="af5bf8448818684348d30d03d59fc2c1b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>RS485ListDevices</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, char list_of_ids[255])</td></tr>
<tr class="separator:af5bf8448818684348d30d03d59fc2c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b0719c48b487b5e7432f794e3fec1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a65b0719c48b487b5e7432f794e3fec1b">RS485GetInfo</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, char *buffer)</td></tr>
<tr class="separator:a65b0719c48b487b5e7432f794e3fec1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f95a0e23b674b1fe32b8e35f0e36863"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a7f95a0e23b674b1fe32b8e35f0e36863">commPing</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a7f95a0e23b674b1fe32b8e35f0e36863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff081c6687d87e38cddfe714ad2de0fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aff081c6687d87e38cddfe714ad2de0fd">commActivate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char activate)</td></tr>
<tr class="separator:aff081c6687d87e38cddfe714ad2de0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894f6f9ec9822112ff3c7eef10d123c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a894f6f9ec9822112ff3c7eef10d123c9">commSetInputs</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[])</td></tr>
<tr class="separator:a894f6f9ec9822112ff3c7eef10d123c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3aee192f28b08cf6d80fc719e73ad46"><td class="memItemLeft" align="right" valign="top"><a id="aa3aee192f28b08cf6d80fc719e73ad46"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>commSetPosStiff</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[])</td></tr>
<tr class="separator:aa3aee192f28b08cf6d80fc719e73ad46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a38427212fc15a1021d2459a86f2c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ae0a38427212fc15a1021d2459a86f2c0">commGetInputs</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[2])</td></tr>
<tr class="separator:ae0a38427212fc15a1021d2459a86f2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a73f0c93c7ae12a95541c1feee10b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int measurements[3])</td></tr>
<tr class="separator:a06a73f0c93c7ae12a95541c1feee10b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3c724150046fc4a766db52fa086fdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a4b3c724150046fc4a766db52fa086fdf">commGetCurrents</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int currents[2])</td></tr>
<tr class="separator:a4b3c724150046fc4a766db52fa086fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f700c3fc90215428707c7c98b3d538f"><td class="memItemLeft" align="right" valign="top"><a id="a3f700c3fc90215428707c7c98b3d538f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commGetCurrAndMeas</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int *values)</td></tr>
<tr class="separator:a3f700c3fc90215428707c7c98b3d538f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a731e861c53a68c7e2e57d36383bf3360"><td class="memItemLeft" align="right" valign="top"><a id="a731e861c53a68c7e2e57d36383bf3360"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commGetEmg</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int emg[2])</td></tr>
<tr class="separator:a731e861c53a68c7e2e57d36383bf3360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaec903aef1ce3cebb5f42f63995c2e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#abaec903aef1ce3cebb5f42f63995c2e1">commGetActivate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char *activate)</td></tr>
<tr class="separator:abaec903aef1ce3cebb5f42f63995c2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a2caeab56a107278aad9e24b406ab0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af9a2caeab56a107278aad9e24b406ab0">commGetInfo</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, unsigned char info_type, char *info)</td></tr>
<tr class="separator:af9a2caeab56a107278aad9e24b406ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">QB Move Parameters</div></td></tr>
<tr class="memitem:aebe4cb071376ef683b788a3842243e90"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aebe4cb071376ef683b788a3842243e90">commSetParam</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, enum <a class="el" href="commands_8h.html#a0f1ee428e49fc602d6fde71d7ff80f36">qbmove_parameter</a> type, void *values, unsigned short num_of_values)</td></tr>
<tr class="separator:aebe4cb071376ef683b788a3842243e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8678c915fec187a8e63a8894e6a91771"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a8678c915fec187a8e63a8894e6a91771">commGetParam</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, enum <a class="el" href="commands_8h.html#a0f1ee428e49fc602d6fde71d7ff80f36">qbmove_parameter</a> type, void *values, unsigned short num_of_values)</td></tr>
<tr class="separator:a8678c915fec187a8e63a8894e6a91771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3359fdac0ba857804dfc4a9bc761b20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ad3359fdac0ba857804dfc4a9bc761b20">commStoreParams</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:ad3359fdac0ba857804dfc4a9bc761b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af49ed4d474529ec3a53e37f5f85c1e7b"><td class="memItemLeft" align="right" valign="top"><a id="af49ed4d474529ec3a53e37f5f85c1e7b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>commStoreDefaultParams</b> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:af49ed4d474529ec3a53e37f5f85c1e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af60062569bcd25b6f2fc19ba378d583c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af60062569bcd25b6f2fc19ba378d583c">commRestoreParams</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:af60062569bcd25b6f2fc19ba378d583c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3771c9c4be2805d66c5b1a59066cb19"><td class="memItemLeft" align="right" valign="top"><a id="aa3771c9c4be2805d66c5b1a59066cb19"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aa3771c9c4be2805d66c5b1a59066cb19">commInitMem</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="memdesc:aa3771c9c4be2805d66c5b1a59066cb19"><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO. <br /></td></tr>
<tr class="separator:aa3771c9c4be2805d66c5b1a59066cb19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97912dd3b3c6529884b0e61a2ca6a31b"><td class="memItemLeft" align="right" valign="top"><a id="a97912dd3b3c6529884b0e61a2ca6a31b"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>timevaldiff</b> (struct timeval *starttime, struct timeval *finishtime)</td></tr>
<tr class="separator:a97912dd3b3c6529884b0e61a2ca6a31b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">General Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>This functions returns an 8 bit LCR checksum over the lenght of a buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_buffer</td><td>Buffer. </td></tr>
    <tr><td class="paramname">data_length</td><td>Buffer length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">char</span>    aux;</div><div class="line"><span class="keywordtype">char</span>    buffer[5];</div><div class="line"></div><div class="line">buffer  = <span class="stringliteral">&quot;abcde&quot;</span>;</div><div class="line">aux     = checksum(buffer,5);</div><div class="line">printf(<span class="stringliteral">&quot;Checksum: %d&quot;</span>, (<span class="keywordtype">int</span>) aux)</div></div><!-- fragment --> </dd></dl>
</div></td></tr>
<tr class="memitem:a35819265b74001583803a2295b3236dc"><td class="memItemLeft" align="right" valign="top"><a id="a35819265b74001583803a2295b3236dc"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>checksum</b> (char *data_buffer, int data_length)</td></tr>
<tr class="separator:a35819265b74001583803a2295b3236dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library of functions for SERIAL PORT communication with a QB Move. Function Prototypes. </p>
<p>This library contains all necessary functions for communicating with a QB Move when using a USB to RS485 connector that provides a Virtual COM interface. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab521aa5010fb1afb801a899a55569e03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab521aa5010fb1afb801a899a55569e03">&sect;&nbsp;</a></span>HANDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HANDLE&#160;&#160;&#160;int</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>On unix systems, HANDLE is defined as an <em>int</em> and INVALID_HANDLE_VALUE is defined as -1. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5f87643fab51e02e4eab71bf4ab1a33a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f87643fab51e02e4eab71bf4ab1a33a">&sect;&nbsp;</a></span>closeRS485()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void closeRS485 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to close a serial port being used with the QB Move.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aff081c6687d87e38cddfe714ad2de0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff081c6687d87e38cddfe714ad2de0fd">&sect;&nbsp;</a></span>commActivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commActivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>activate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function activates or deactivates a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">activate</td><td>TRUE to turn motors on. FALSE to turn motors off. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#aff081c6687d87e38cddfe714ad2de0fd">commActivate</a>(&amp;comm_settings_t, device_id, TRUE);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="abaec903aef1ce3cebb5f42f63995c2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaec903aef1ce3cebb5f42f63995c2e1">&sect;&nbsp;</a></span>commGetActivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetActivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>activate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the activation status of a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">activation</td><td>Activation status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example </dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">char</span>    activation_status;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#abaec903aef1ce3cebb5f42f63995c2e1">commGetActivate</a>(&amp;comm_settings_t, DEVICE_ID, activation_status))</div><div class="line">    printf(<span class="stringliteral">&quot;Activation status: %d\n&quot;</span>, &amp;activation_status);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve measurements.&quot;</span>);                    </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a4b3c724150046fc4a766db52fa086fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3c724150046fc4a766db52fa086fdf">&sect;&nbsp;</a></span>commGetCurrents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetCurrents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>currents</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets currents from a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">currents</td><td>Currents.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example </dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span> currents[2];      </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a>(&amp;comm_settings_t, DEVICE_ID, currents))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>,currents[0], currents[1], currents[2]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve measurements.&quot;</span>);                    </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af9a2caeab56a107278aad9e24b406ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a2caeab56a107278aad9e24b406ab0">&sect;&nbsp;</a></span>commGetInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>info_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the QB Move and get information about the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500. </td></tr>
    <tr><td class="paramname">info_type</td><td>Information to be retrieved.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">char</span>    auxstring[500];</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#af9a2caeab56a107278aad9e24b406ab0">commGetInfo</a>(&amp;comm_settings_t, device_id, <a class="code" href="commands_8h.html#a2ba44fc5b8a316bd307d0baa9ab629ef">INFO_ALL</a>, auxstring);</div><div class="line">puts(auxstring);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ae0a38427212fc15a1021d2459a86f2c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a38427212fc15a1021d2459a86f2c0">&sect;&nbsp;</a></span>commGetInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetInputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>inputs</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets input references from a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">inputs</td><td>Input references.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example </dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span> inputs[2];      </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#ae0a38427212fc15a1021d2459a86f2c0">commGetInputs</a>(&amp;comm_settings_t, DEVICE_ID, inputs))</div><div class="line">    printf(<span class="stringliteral">&quot;Inputs: %d\t%d\n&quot;</span>,inputs[0], inputs[1]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve measurements.&quot;</span>);                    </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a06a73f0c93c7ae12a95541c1feee10b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a73f0c93c7ae12a95541c1feee10b7">&sect;&nbsp;</a></span>commGetMeasurements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetMeasurements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>measurements</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets measurements from a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">measurements</td><td>Measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example </dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span> measurements[3];      </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a>(&amp;comm_settings_t, DEVICE_ID, measurements))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>,measurements[0], measurements[1], measurements[2]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve measurements.&quot;</span>);                    </div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a8678c915fec187a8e63a8894e6a91771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8678c915fec187a8e63a8894e6a91771">&sect;&nbsp;</a></span>commGetParam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="commands_8h.html#a0f1ee428e49fc602d6fde71d7ff80f36">qbmove_parameter</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>num_of_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets a parameter that is stored in the QB Move memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">param_type</td><td>The parameter to be get. </td></tr>
    <tr><td class="paramname">values</td><td>An array with the parameter values. </td></tr>
    <tr><td class="paramname">num_of_values</td><td>The size of the values array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"> <a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"> <span class="keywordtype">int</span>     device_id = 65;</div><div class="line"> <span class="keywordtype">float</span>   control_k;</div><div class="line"></div><div class="line"> <a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"> <span class="keywordflow">if</span>( commGetParams(&amp;comm_settings_t, device_id, PARAM_CONTROL_K,</div><div class="line">                                        &amp;control_k, 1) )</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Control constant: %f&quot;</span>, control_k);   </div><div class="line">}</div><div class="line"> <a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a7f95a0e23b674b1fe32b8e35f0e36863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f95a0e23b674b1fe32b8e35f0e36863">&sect;&nbsp;</a></span>commPing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commPing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the QB Move.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if ping was ok, -1 otherwise. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line">   <a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> ( <a class="code" href="qbmove__communications_8h.html#a7f95a0e23b674b1fe32b8e35f0e36863">commPing</a>(&amp;comm_settings_t, device_id) )</div><div class="line">        puts(<span class="stringliteral">&quot;Device exists.&quot;</span>);</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        puts(<span class="stringliteral">&quot;Device does not exist.&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af60062569bcd25b6f2fc19ba378d583c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af60062569bcd25b6f2fc19ba378d583c">&sect;&nbsp;</a></span>commRestoreParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commRestoreParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function restores the factory default parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#af60062569bcd25b6f2fc19ba378d583c">commRestoreParams</a>(&amp;comm_settings_t, device_id)</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a894f6f9ec9822112ff3c7eef10d123c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a894f6f9ec9822112ff3c7eef10d123c9">&sect;&nbsp;</a></span>commSetInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetInputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>inputs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function send reference inputs to a QB Move connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">inputs</td><td>Input references.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span> inputs[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line">inputs[0]   = 1000;</div><div class="line">inputs[1]   = -1000;    </div><div class="line"><a class="code" href="qbmove__communications_8h.html#a894f6f9ec9822112ff3c7eef10d123c9">commSetInputs</a>(&amp;comm_settings_t, device_id, inputs);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aebe4cb071376ef683b788a3842243e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebe4cb071376ef683b788a3842243e90">&sect;&nbsp;</a></span>commSetParam()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commSetParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="commands_8h.html#a0f1ee428e49fc602d6fde71d7ff80f36">qbmove_parameter</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>num_of_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets a parameter that remains stored in the QB Move memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">param_type</td><td>The parameter to be set. </td></tr>
    <tr><td class="paramname">values</td><td>An array with the parameter values. </td></tr>
    <tr><td class="paramname">num_of_values</td><td>The size of the values array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">float</span>   control_k = 0.1;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#aebe4cb071376ef683b788a3842243e90">commSetParam</a>(&amp;comm_settings_t, global_args.device_id,</div><div class="line">    PARAM_CONTROL_K, &amp;global_args.control_k, 1);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ad3359fdac0ba857804dfc4a9bc761b20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3359fdac0ba857804dfc4a9bc761b20">&sect;&nbsp;</a></span>commStoreParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commStoreParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function stores all parameters that were set in the QB Move memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#ad3359fdac0ba857804dfc4a9bc761b20">commStoreParams</a>(&amp;comm_settings_t, device_id)</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a4d05126da422a8993b011282362c7882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d05126da422a8993b011282362c7882">&sect;&nbsp;</a></span>openRS485()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void openRS485 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port_s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to open a serial port for using with the QB Move.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port_s</td><td>The string to the serial port path.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the file descriptor associated to the serial port.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><span class="keywordflow">if</span>(comm_settings_t.file_handle == INVALID_HANDLE_VALUE)</div><div class="line">{</div><div class="line"><span class="comment">// ERROR</span></div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a65b0719c48b487b5e7432f794e3fec1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b0719c48b487b5e7432f794e3fec1b">&sect;&nbsp;</a></span>RS485GetInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RS485GetInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the serial port for a QB Move and get information about the device. ONLY USE WHEN ONE DEVICE IS CONNECTED ONLY.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">char</span>        auxstring[500];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a4d05126da422a8993b011282362c7882">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-FTU6OC47&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a65b0719c48b487b5e7432f794e3fec1b">RS485GetInfo</a>(&amp;comm_settings_t, auxstring);         </div><div class="line">puts(auxstring);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a088f2abb4e7610589910e31f5c72b236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088f2abb4e7610589910e31f5c72b236">&sect;&nbsp;</a></span>RS485listPorts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RS485listPorts </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>list_of_ports</em>[10][255]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to return a list of available serial ports. A maximum of 10 ports are found. THIS FUNCTIONS IS NOT IMPLEMENTED FOR LINUX YET.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Make LINUX version of this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list_of_ports</td><td>An array of strings with the serial ports paths.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of serial ports found.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">int</span>  i, num_ports;</div><div class="line"><span class="keywordtype">char</span> list_of_ports[10][255];</div><div class="line"></div><div class="line">num_ports = <a class="code" href="qbmove__communications_8h.html#a088f2abb4e7610589910e31f5c72b236">RS485listPorts</a>(ports);    </div><div class="line"></div><div class="line"><span class="keywordflow">for</span>(i = 0; i &lt; num_ports; ++i)</div><div class="line">{</div><div class="line">    puts(ports[i]);</div><div class="line">}    </div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a8c7444a05d655538cb7d13ee47290c8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7444a05d655538cb7d13ee47290c8d">&sect;&nbsp;</a></span>RS485read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RS485read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>package</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to read a package from the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">package</td><td>Package will be stored here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns package length if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">char</span> package_in[15];       <span class="comment">// output data buffer</span></div><div class="line"><span class="keywordtype">char</span> package_out[15];      <span class="comment">// output data buffer</span></div><div class="line"><span class="keywordtype">int</span> package_out_size;</div><div class="line"><span class="keywordtype">int</span> <span class="keywordtype">id</span> = 65;</div><div class="line"><span class="keywordtype">int</span> measurements[3];</div><div class="line"></div><div class="line">package_out_size = pkgGetMeasurements(<span class="keywordtype">id</span>, package_out);</div><div class="line"></div><div class="line">RS485write(comm_settings_t, <span class="keywordtype">id</span>, package_out, package_out_size);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="qbmove__communications_8h.html#a8c7444a05d655538cb7d13ee47290c8d">RS485read</a>(comm_settings_t, <span class="keywordtype">id</span>, package_in, 1))</div><div class="line">    <span class="keywordflow">return</span> -1;</div><div class="line"></div><div class="line">processReplyGetMeasurements(package_in, measurements);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5c14f1500334434ce99a14a1ee10f9b2.html">aml_drivers</a></li><li class="navelem"><a class="el" href="dir_8365f8a34de6e25c369938431d8b4038.html">aml_pisa_hand</a></li><li class="navelem"><a class="el" href="dir_1a60e376846f8cce4fe545059cf049a6.html">qbAPI</a></li><li class="navelem"><a class="el" href="dir_bdf20c7156b17ec1ff5f732de5f1d419.html">src</a></li><li class="navelem"><a class="el" href="qbmove__communications_8h.html">qbmove_communications.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
